---
title: Customising API Endpoints
category: Nox.Lib
description: Docs intro
layout: ../../layouts/MainLayout.astro
---
***
Nox offers several ways to add custom endpoint/controllers. The options include:

- Extend existing partial classes that have been generated
- Override methods in classes that have been generated
- Create new class defintions for custom functionality

## Extending Generated Classes

As detailed in the previous section the standard OData controller that is generated by the Nox.Generator for each of our defined entities, includes all the expected CRUD endpoints.

We'll start by adding custom endoints, both OData and non-OData, by simply extending the partial class `Presentation.Api.OData.CurrenciesController.g.cs` that have been generated.

```csharp
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.OData.Query;

namespace Cryptocash.Presentation.Api.OData;

public partial class CurrenciesController
{
    [EnableQuery]
    [HttpGet("api/MyCustomODataEndpoint")]
    public ActionResult<IQueryable<Application.Dto.CurrencyDto>> MyCustomODataEndpoint()
    {
        // Your custom code here
        return Ok(new List<Application.Dto.CurrencyDto>() {
            new Application.Dto.CurrencyDto()
            {
                Id = "DOGE",
                Name = "Dogecoin",
                Symbol = "Ɖ"
            }
        });
    }

    [HttpGet("api/[controller]/[action]")]
    public ActionResult<IQueryable<Application.Dto.CurrencyDto>> MyCustomEndpoint()
    {
        // Your custom code here
        return Ok(new List<Application.Dto.CurrencyDto>() {
            new Application.Dto.CurrencyDto()
            {
                Id = "BTC",
                Name = "Bitcoin",
                Symbol = "₿"
            },
            new Application.Dto.CurrencyDto()
            {
                Id = "ETH",
                Name = "Etherium",
                Symbol = "Ξ"
            }
        });
    }
}
```

For our OData custom endpoint, we need to register the function with the `ODataModelBuilder` in our startup fixture. For our example, we'll update the `builder.Services.AddNox()` line `Program.cs` as follows:

```csharp
builder.Services.AddNox((oDataModelBuilder) => {
    oDataModelBuilder.Function("myCustomODataEndpoint").ReturnsCollectionFromEntitySet<CurrencyDto>("Currencies");
});
```
Our custom endpoints are now visible on the Swagger:

<div align="center">
    <img src="https://noxorg.dev/docs/images/browser_sample-swagger-custom-endpoints.png" alt="Overview" width="100%">
    <br>
</div>

## Override Generated Classes

Our next example deals with overriding any of the methods that have been generated for our standard OData controllers.

The code snipped below overrides the `Post` method that has been generated for the `CurrenciesController`. In a similar fashion, we can extend the `Get`, `Put`, `Patch` or `Delete` methods.

```csharp
public override async Task<ActionResult<CurrencyDto>> Post([FromBody] CurrencyCreateDto currency)
{
    if (currency.Symbol.IsNullOrEmpty() )
    {
        currency.Symbol = "?";
    }

    return await base.Post(currency);
}
```

## Create Custom Endpoints

We can create custom endponts that are not generated from entities defined in our solution.

Again, both OData and non-OData endponts are supported.

The code snippet below shows an example of how we careate both OData and non-OData endpoints for the `Application/Dto/TokenTypeDto` custom DTO we created in [this step](nox-lib-custom-dtos#create-a-custom-dto):

```csharp
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.OData.Query;
using Microsoft.AspNetCore.OData.Routing.Controllers;
using Cryptocash.Application.Dto;

namespace Cryptocash.Controllers;

public class TokenTypesController : ODataController
{
    // OData endpoint
    [EnableQuery]
    public ActionResult<IQueryable<TokenTypeDto>> Get()
    {
        return Ok(new List<TokenTypeDto>()
        {
            new TokenTypeDto(1,"DIG", "Digital"),
            new TokenTypeDto(2,"ANL", "Analogue"),
        }) ;
    }

    // Non-Odata endpoint
    [HttpGet("api/[controller]/[action]")]
    public ActionResult<IQueryable<Application.Dto.TokenTypeDto>> DigitalTokens()
    {
        return Ok(new List<TokenTypeDto>()
        {
            new TokenTypeDto(1,"DIG", "Digital"),
        });
    }
}
```